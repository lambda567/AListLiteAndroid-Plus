import{bV as I,P as O,j as D,D as t,aw as f,S as d,dU as m,a_ as C,aM as L,aQ as v,aE as B,ag as l,q as A,cE as E,cF as K,dA as T,aq as W,cD as U,cP as F,bU as S,$ as k,ab as b,av as R,B as x,C as H,b0 as V,dV as q,dW as G,dX as y,Q as h,o as Q,dY as J,R as X,a4 as Y,dZ as Z,ah as N}from"./index-Bm6_Y9sI.js";import{b as p}from"./style-BGlJarg-.js";import{n as ee,t as _,u as te,s as ne}from"./storage-D_MY-bv8.js";import{J as re}from"./index-C7ZV98_F.js";import{O as $,g as ie}from"./icon-1UxJ_z4h.js";import{I as P,u as M}from"./helper-CK1xm1ZU.js";const r=[{name:"name",textAlign:"left",w:{"@initial":"76%","@md":"50%"}},{name:"size",textAlign:"right",w:{"@initial":"24%","@md":"17%"}},{name:"modified",textAlign:"right",w:{"@initial":0,"@md":"33%"}}],ae=e=>{const{isHide:u}=I();if(u(e.obj))return null;const{setPathAs:g}=O(),{show:o}=p({id:1}),{pushHref:s,to:c}=D(),{openWithDoubleClick:a,toggleWithClick:i,restoreSelectionCache:w}=M(),j=()=>A.list_item_filename_overflow;return t(R.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.2},style:{width:"100%"},get children(){return t(f,{get classList(){return{selected:!!e.obj.selected}},class:"list-item viselect-item",get"data-index"(){return e.index},w:"$full",p:"$2",rounded:"$lg",transition:"all 0.3s",get _hover(){return{transform:"scale(1.01)",bgColor:k()}},as:re,get href(){return e.obj.name},get cursor(){return a()||i()?"default":"pointer"},get bgColor(){return b(()=>!!e.obj.selected)()?k():void 0},"on:dblclick":()=>{a()&&(m(e.index,!0,!0),c(s(e.obj.name)))},"on:click":n=>{if(n.preventDefault(),!a()&&!(n.ctrlKey||n.metaKey||n.shiftKey)&&w()){if(i())return m(e.index,!e.obj.selected);c(s(e.obj.name))}},onMouseEnter:()=>{g(e.obj.name,e.obj.is_dir,!0)},onContextMenu:n=>{S(()=>{m(e.index,!0,!0)}),o(n,{props:e.obj})},get children(){return[t(f,{class:"name-box",spacing:"$1",get w(){return r[0].w},get children(){return[t(d,{get when(){return C()},get children(){return t(P,{"on:mousedown":n=>{n.stopPropagation()},"on:click":n=>{n.stopPropagation()},get checked(){return e.obj.selected},onChange:n=>{m(e.index,n.target.checked)}})}}),t(L,{class:"icon",boxSize:"$6",get color(){return B()},get as(){return ie(e.obj)},mr:"$1",get cursor(){return e.obj.type!==$.IMAGE?"inherit":"pointer"},"on:click":n=>{e.obj.type===$.IMAGE&&(n.ctrlKey||n.metaKey||n.shiftKey||w()&&(v.emit("gallery",e.obj.name),n.preventDefault(),n.stopPropagation()))}}),t(l,{class:"name",get css(){return{wordBreak:"break-all",whiteSpace:j()==="multi_line"?"unset":"nowrap","overflow-x":j()==="scrollable"?"auto":"hidden",textOverflow:j()==="ellipsis"?"ellipsis":"unset","scrollbar-width":"none","&::-webkit-scrollbar":{display:"none"}}},get title(){return e.obj.name},get children(){return e.obj.name}})]}}),t(d,{get fallback(){return t(l,{class:"size",get w(){return r[1].w},get textAlign(){return r[1].textAlign},get children(){return U(e.obj.size)}})},get when(){return ne(e.obj.mount_details)},get children(){return t(d,{get fallback(){return t(l,{class:"size",get w(){return r[1].w},get textAlign(){return r[1].textAlign},get children(){return _(e.obj.mount_details)}})},get when(){return!W("show_disk_usage_in_plain_text")},get children(){return t(E,{get w(){return r[1].w},class:"disk-usage-percentage",trackColor:"$info3",rounded:"$full",size:"md",get value(){return te(e.obj.mount_details)},get children(){return[t(K,{get color(){return ee(e.obj.mount_details)?"$danger6":"$info6"},rounded:"$md"}),t(T,{class:"disk-usage-text",get children(){return _(e.obj.mount_details)}})]}})}})}}),t(l,{class:"modified",display:{"@initial":"none","@md":"inline"},get w(){return r[2].w},get textAlign(){return r[2].textAlign},get children(){return F(e.obj.modified)}})]}})}})},z=e=>{const u=Q(),[g,o]=x(),[s,c]=x(!1);H(()=>{g()&&e.sortCallback(g(),s())});const a=i=>({fontWeight:"bold",fontSize:"$sm",color:"$neutral11",textAlign:i.textAlign,cursor:"pointer",onClick:()=>{i.name===g()?c(!s()):S(()=>{o(i.name),c(!1)})}});return t(f,{class:"title",w:"$full",p:"$2",get children(){return[t(f,{get w(){return r[0].w},spacing:"$1",get children(){return[t(d,{get when(){return b(()=>!e.disableCheckbox)()&&C()},get children(){return t(P,{get checked(){return G()},get indeterminate(){return q()},onChange:i=>{V(i.target.checked)}})}}),b(()=>b(()=>!!y())()?t(l,h(()=>a(r[0]),{get children(){return y()}})):t(l,h(()=>a(r[0]),{get children(){return u("home.obj.".concat(r[0].name))}})))]}}),t(l,h({get w(){return r[1].w}},()=>a(r[1]),{get children(){return u("home.obj.".concat(r[1].name))}})),t(l,h({get w(){return r[2].w}},()=>a(r[2]),{display:{"@initial":"none","@md":"inline"},get children(){return u("home.obj.".concat(r[2].name))}}))]}})},se=()=>{const e=o=>{var c,a;const s=Array.from((a=(c=o.dataTransfer)==null?void 0:c.items)!=null?a:[]);for(let i=0;i<s.length;i++)if(s[i].kind==="file"){v.emit("tool","upload"),o.preventDefault();break}},{registerSelectContainer:u,captureContentMenu:g}=M();return u(),t(N,{onDragOver:e,"oncapture:contextmenu":g,class:"list viselect-container",w:"$full",spacing:"$1",get children(){return[t(z,{sortCallback:J}),t(X,{get each(){return Y.objs},children:(o,s)=>t(ae,{obj:o,get index(){return s()}})}),t(d,{get when(){return A.show_count_msg==="visible"},get children(){return t(l,{size:"sm",color:"$neutral11",get children(){return Z()}})}})]}})},me=Object.freeze(Object.defineProperty({__proto__:null,ListTitle:z,default:se},Symbol.toStringTag,{value:"Module"}));export{z as L,me as a,r as c};
