System.register(["./index-legacy-B4yRbF0f.js","./share-legacy-CByhnUP5.js","./item_type-legacy-NfhfVKtF.js","./ResponsiveGrid-legacy-rLzPeoz6.js","./index-legacy-DbY3jwuO.js"],function(e,r){"use strict";var t,n,a,u,l,g,i,d,o,c,s,h,v,p,y,m,b,x,C,f,w,S,_,T,k,$,j,O,I,N;return{setters:[e=>{t=e.D,n=e.bE,a=e.o,u=e.a5,l=e.a6,g=e.au,i=e.I,d=e.S,o=e.aA,c=e.bQ,s=e.T,h=e.bF,v=e.bW,p=e.aR,y=e.bR,m=e.j,b=e.b9,x=e.bq,C=e.bV,f=e.B,w=e.c0,S=e.K,_=e.bt,T=e.r,k=e.am,$=e.bT},e=>{j=e.r},e=>{O=e.T},e=>{I=e.R},e=>{N=e.n}],execute:function(){const r=e=>{const r=a();return t(y,{w:"$full",display:"flex",flexDirection:"column",get required(){return e.required},get children(){return[t(n,{get for(){return e.name},display:"flex",alignItems:"center",get children(){return r(e.full_name_path??`shares.${e.name}`)}}),t(u,{get fallback(){return t(p,{get children(){return r("settings.unknown_type")}})},get children(){return[t(l,{get when(){return e.type===O.String},get children(){return t(g,{w:"$full",spacing:"$2",get children(){return[t(i,{get id(){return e.name},type:"text",get readOnly(){return e.readonly},get value(){return e.value},get invalid(){return!e.valid},get onChange(){return e.type===O.String?r=>e.onChange?.(r.currentTarget.value):void 0}}),t(d,{get when(){return e.type===O.String&&e.random},get children(){return t(o,{colorScheme:"neutral","aria-label":"random",get icon(){return t(N,{})},get onClick(){return e.type===O.String?()=>e.onChange?.(e.random()):void 0}})}})]}})}}),t(l,{get when(){return e.type===O.Number},get children(){return t(i,{type:"number",get id(){return e.name},get readOnly(){return e.readonly},get value(){return e.value},get invalid(){return!e.valid},get onInput(){return e.type===O.Number?r=>e.onChange?.(parseInt(r.currentTarget.value)):void 0}})}}),t(l,{get when(){return e.type===O.Float},get children(){return t(i,{type:"number",get id(){return e.name},get readOnly(){return e.readonly},get value(){return e.value},get invalid(){return!e.valid},get onInput(){return e.type===O.Float?r=>e.onChange?.(parseFloat(r.currentTarget.value)):void 0}})}}),t(l,{get when(){return e.type===O.Bool},get children(){return t(c,{get id(){return e.name},get readOnly(){return e.readonly},get defaultChecked(){return e.value},get invalid(){return!e.valid},get onChange(){return e.type===O.Bool?r=>e.onChange?.(r.currentTarget.checked):void 0}})}}),t(l,{get when(){return e.type===O.Text},get children(){return t(s,{get id(){return e.name},get readOnly(){return e.readonly},get value(){return e.value},get invalid(){return!e.valid},get onChange(){return e.type===O.Text?r=>e.onChange?.(r.currentTarget.value):void 0}})}}),t(l,{get when(){return e.type===O.Select},get children(){return t(h,{get id(){return e.name},get readOnly(){return e.readonly},get value(){return e.value},get invalid(){return!e.valid},get onChange(){return e.type===O.Select?r=>e.onChange?.(r):void 0},get children(){return t(v,{get readonly(){return e.readonly},get searchable(){return e.type===O.Select&&e.searchable},get options(){return e.options.split(",").map(t=>({key:t,label:r((e.options_prefix??`shares.${e.name}s`)+`.${t}`)}))}})}})}})]}})]}})};e("default",()=>{const e=a(),{params:n,back:u,to:l}=m(),{id:g}=n,[i,o]=b(()=>x.get(`/share/get?id=${g}`),!0),[c,s]=C({}),[h,v]=f(""),[p,y]=f(!1),[N,q]=f(""),[D,F]=f(!0);g&&(async()=>{const e=await o();_(e,e=>{$(()=>{s(e),v(e.files.join("\n")),e.expires&&q(new Date(e.expires).toLocaleString()),y(!0)})})})();const[R,B]=b(()=>x.post("/share/"+(g?"update":"create"),c));return t(k,{get loading(){return!!g&&i()},get children(){return[t(w,{mb:"$2",get children(){return e("global."+(g?"edit":"add"))}}),t(I,{get children(){return[t(d,{when:g,get children(){return t(r,{name:"id",get type(){return O.String},value:g,valid:!0,readonly:!0})}}),t(r,{name:"files",get type(){return O.Text},get value(){return h()},get valid(){return p()},required:!0,onChange:e=>{v(e),y(e.length>0),s("files",e.split("\n"))}}),t(r,{name:"remark",get type(){return O.Text},get value(){return c.remark},valid:!0,onChange:e=>{s("remark",e)}}),t(r,{name:"extract_folder",get type(){return O.Select},get value(){return c.extract_folder},valid:!0,options:"front,back",onChange:e=>{s("extract_folder",e)}}),t(r,{name:"order_by",get type(){return O.Select},get value(){return c.order_by},valid:!0,options:"name,size,modified",onChange:e=>{s("order_by",e)}}),t(r,{name:"order_direction",get type(){return O.Select},get value(){return c.order_direction},valid:!0,options:"asc,desc",onChange:e=>{s("order_direction",e)}}),t(r,{name:"pwd",get type(){return O.String},get value(){return c.pwd},valid:!0,onChange:e=>{s("pwd",e)},random:j}),t(r,{name:"max_accessed",get type(){return O.Number},get value(){return c.max_accessed},valid:!0,onChange:e=>{s("max_accessed",e)}}),t(d,{when:g,get children(){return t(r,{name:"accessed",get type(){return O.Number},get value(){return c.accessed},valid:!0,onChange:e=>{s({...c,accessed:e})}})}}),t(r,{name:"expires",get type(){return O.String},get value(){return N()},get valid(){return D()},onChange:e=>{if(q(e),""===e)return F(!0),void s("expires",null);const r=new Date(e);isNaN(r.getTime())?F(!1):(F(!0),s("expires",r.toISOString()))}}),t(r,{name:"readme",get type(){return O.Text},get value(){return c.readme},valid:!0,onChange:e=>{s("readme",e)}}),t(r,{name:"header",get type(){return O.Text},get value(){return c.header},valid:!0,onChange:e=>{s("header",e)}})]}}),t(S,{mt:"$2",get disabled(){return!D()||!p()},get loading(){return R()},onClick:async()=>{const r=await B();_(r,()=>{T.success(e("global.save_success")),u()},(e,t)=>{r.data.id&&l(`/@manage/shares/edit/${r.data.id}`)})},get children(){return e("global."+(g?"save":"add"))}})]}})})}}});
