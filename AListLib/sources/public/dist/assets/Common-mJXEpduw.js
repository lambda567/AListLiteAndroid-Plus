import{j as v,b9 as g,br as n,bW as _,di as C,B as R,D as t,dj as I,Q as L,bu as o,r as c,o as T,aw as j,K as l,dk as x,ah as A,dl as B}from"./index-Bm6_Y9sI.js";import{b as D}from"./useTitle-Bvvany__.js";import{I as W}from"./SettingItem-BKq_8Tgg.js";import{R as F}from"./ResponsiveGrid-B-Gtx7hU.js";import"./index-C4xpIx4V.js";import"./index-C7ZV98_F.js";import"./index-BMdLk_D8.js";import"./item_type-CyD6qwPS.js";const q=d=>{const s=T(),{pathname:S}=v();D("manage.sidemenu.".concat(S().split("/").pop()));const[u,y]=g(()=>n.get("/admin/setting/list?group=".concat(d.group))),[p,r]=_([]),i=async()=>{const e=await y();o(e,r)};i();const[b,k]=g(()=>n.post("/admin/setting/save",C(p))),[m,w]=g(()=>n.post("/admin/setting/default?group=".concat(d.group))),[h,f]=R(!1);return t(A,{w:"$full",alignItems:"start",spacing:"$2",get children(){return[t(F,{get children(){return t(I,{each:p,children:e=>t(W,L(e,{onChange:a=>{r($=>e().key===$.key,"value",a)},onDelete:async()=>{f(!0);const a=await n.post("/admin/setting/delete?key=".concat(e().key));f(!1),o(a,()=>{c.success(s("global.delete_success")),i()})}}))})}}),t(j,{spacing:"$2",get children(){return[t(l,{colorScheme:"accent",onClick:i,get loading(){return u()||h()||m()},get children(){return s("global.refresh")}}),t(l,{get loading(){return b()},onClick:async()=>{const e=await k();o(e,async()=>{c.success(s("global.save_success")),x(await n.get("/public/settings"),B)})},get children(){return s("global.save")}}),t(l,{colorScheme:"warning",get loading(){return u()||h()||m()},onClick:async()=>{const e=await w();o(e,a=>{c.info(s("manage.load_default_setting_success")),r(a)})},get children(){return s("manage.load_default_setting")}})]}})]}})};export{q as default};
