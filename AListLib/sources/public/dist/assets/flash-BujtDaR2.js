import{j as E,B as u,e6 as L,a4 as s,au as P,N as R,ax as j,bq as l,aZ as w,D as i,ac as C,S as m,aa as b,o as x}from"./index-Bm6_Y9sI.js";var B=j("<div id=swf-container style=justify-content:center;align-items:center>");const S=()=>{const y=x(),{replace:d}=E(),[h,n]=u(!0),[p,a]=u(!1),{ruffleJSPath:g}=L();let r=s.objs.filter(e=>e.name.toLowerCase().endsWith(".swf"));r.length===0&&(r=[s.obj]);const f=e=>{const t=r.findIndex(o=>o.name===s.obj.name);e.key==="ArrowLeft"&&t>0?d(r[t-1].name):e.key==="ArrowRight"&&t<r.length-1&&d(r[t+1].name)};P(()=>{window.addEventListener("keydown",f),v()}),R(()=>{window.removeEventListener("keydown",f);const e=document.getElementById("ruffle-player");e==null||e.remove();const t=document.getElementById("ruffle-script");t==null||t.remove()});const v=()=>{n(!0),a(!1);const e=document.getElementById("ruffle-player");if(e==null||e.remove(),window.RufflePlayer){c();return}const t=document.createElement("script");t.src=g(),t.async=!0,t.id="ruffle-script",t.onload=()=>{c()},t.onerror=()=>{a(!0),n(!1),console.error("无法加载Ruffle播放器")},document.head.appendChild(t)},c=()=>{try{const t=window.RufflePlayer.newest().createPlayer();t.id="ruffle-player",t.style.width="100%",t.style.height="100%";const o=document.getElementById("swf-container");o&&(o.innerHTML="",o.appendChild(t),t.addEventListener("loaded",()=>{n(!1)}),t.addEventListener("error",()=>{a(!0),n(!1)}),t.load(s.raw_url))}catch(e){console.error("Ruffle初始化失败:",e),a(!0),n(!1)}};return(()=>{var e=B();return l(e,"position","relative"),l(e,"width","100%"),l(e,"height","75vh"),l(e,"display","flex"),w(e,i(m,{get when(){return h()},get children(){return i(C,{})}}),null),w(e,i(m,{get when(){return p()},get children(){return i(b,{get msg(){return y("preview.failed_load_swf")},h:"75vh"})}}),null),e})()};export{S as default};
