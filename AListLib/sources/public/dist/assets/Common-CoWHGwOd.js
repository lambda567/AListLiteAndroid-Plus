import{j as w,b9 as g,bq as n,bV as _,df as C,B as R,D as t,dg as I,Q as L,bt as o,r as c,o as T,au as x,K as l,dh as A,af as B,di as D}from"./index-C2tuPJaA.js";import{b as V}from"./useTitle-BxtUm_0q.js";import{I as j}from"./SettingItem-Cr17_PCr.js";import{R as q}from"./ResponsiveGrid-C5alewH_.js";import"./index-D8gw5_F6.js";import"./index-BIqS3B56.js";import"./index-D1UgPq5q.js";import"./item_type-CV3e5W3l.js";const W=d=>{const s=T(),{pathname:S}=w();V("manage.sidemenu.".concat(S().split("/").pop()));const[u,y]=g(()=>n.get("/admin/setting/list?group=".concat(d.group))),[p,i]=_([]),r=async()=>{const e=await y();o(e,i)};r();const[b,k]=g(()=>n.post("/admin/setting/save",C(p))),[m,$]=g(()=>n.post("/admin/setting/default?group=".concat(d.group))),[f,h]=R(!1);return t(B,{w:"$full",alignItems:"start",spacing:"$2",get children(){return[t(q,{get children(){return t(I,{each:p,children:e=>t(j,L(e,{onChange:a=>{i(v=>e().key===v.key,"value",a)},onDelete:async()=>{h(!0);const a=await n.post("/admin/setting/delete?key=".concat(e().key));h(!1),o(a,()=>{c.success(s("global.delete_success")),r()})}}))})}}),t(x,{spacing:"$2",get children(){return[t(l,{colorScheme:"accent",onClick:r,get loading(){return u()||f()||m()},get children(){return s("global.refresh")}}),t(l,{get loading(){return b()},onClick:async()=>{const e=await k();o(e,async()=>{c.success(s("global.save_success")),A(await n.get("/public/settings"),D)})},get children(){return s("global.save")}}),t(l,{colorScheme:"warning",get loading(){return u()||f()||m()},onClick:async()=>{const e=await $();o(e,a=>{c.info(s("manage.load_default_setting_success")),i(a)})},get children(){return s("manage.load_default_setting")}})]}})]}})};export{W as default};
