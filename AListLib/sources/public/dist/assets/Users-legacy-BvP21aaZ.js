System.register(["./index-legacy-BnW9yB9Z.js","./useTitle-legacy-Dz_oGTmz.js","./DeletePopover-legacy-CD4d4LSF.js","./Wether-legacy-CAaj_TCP.js"],function(e,r){"use strict";var n,t,c,l,a,s,i,u,d,g,o,h,m,b,$,f,p,y,w,_,v,C,j,k,S,x,D;return{setters:[e=>{n=e.j,t=e.b9,c=e.br,l=e.B,a=e.dt,s=e.D,i=e.aw,u=e.K,d=e.o,g=e.an,o=e.du,h=e.dv,m=e.dw,b=e.R,$=e.dx,f=e.dy,p=e.dz,y=e.bu,w=e.r,_=e.ah,v=e.cC,C=e.aW,j=e.aV,k=e.a5},e=>{S=e.b},e=>{x=e.D},e=>{D=e.W}],execute:function(){const r=e=>{const r=[{name:"general",color:"info"},{name:"guest",color:"neutral"},{name:"admin",color:"accent"}];return s(v,{get colorScheme(){return r[e.role].color},get children(){return r[e.role].name}})},W=e=>{const r=d();return s(i,{spacing:"$0_5",get children(){return s(b,{each:C,children:(n,t)=>s(j,{get label(){return r(`users.permissions.${n}`)},get children(){return s(g,{boxSize:"$2",rounded:"$full",get bg(){return`$${k.can(e.user,t())?"success":"danger"}9`}})}})})}})};e("default",()=>{const e=d();S("manage.sidemenu.users");const{to:v}=n(),[C,j]=t(()=>c.get("/admin/user/list")),[k,z]=l([]),B=async()=>{const e=await j();y(e,e=>z(e.content))};B();const[H,I]=a(e=>c.post(`/admin/user/delete?id=${e}`)),[K,O]=a(e=>c.post(`/admin/user/cancel_2fa?id=${e}`));return s(_,{spacing:"$2",alignItems:"start",w:"$full",get children(){return[s(i,{spacing:"$2",get children(){return[s(u,{colorScheme:"accent",get loading(){return C()},onClick:B,get children(){return e("global.refresh")}}),s(u,{onClick:()=>{v("/@manage/users/add")},get children(){return e("global.add")}})]}}),s(g,{w:"$full",overflowX:"auto",get children(){return s(o,{highlightOnHover:!0,dense:!0,get children(){return[s(h,{get children(){return s(m,{get children(){return[s(b,{each:["username","base_path","role","permission","available"],children:r=>s($,{get children(){return e(`users.${r}`)}})}),s($,{get children(){return e("global.operations")}})]}})}}),s(f,{get children(){return s(b,{get each(){return k()},children:n=>s(m,{get children(){return[s(p,{get children(){return n.username}}),s(p,{get children(){return n.base_path}}),s(p,{get children(){return s(r,{get role(){return n.role}})}}),s(p,{get children(){return s(W,{user:n})}}),s(p,{get children(){return s(D,{get yes(){return!n.disabled}})}}),s(p,{get children(){return s(i,{spacing:"$2",get children(){return[s(u,{onClick:()=>{v(`/@manage/users/edit/${n.id}`)},get children(){return e("global.edit")}}),s(x,{get name(){return n.username},get loading(){return H()===n.id},onClick:async()=>{const r=await I(n.id);y(r,()=>{w.success(e("global.delete_success")),B()})}}),s(u,{colorScheme:"accent",get loading(){return K()===n.id},onClick:async()=>{const r=await O(n.id);y(r,()=>{w.success(e("users.cancel_2fa_success")),B()})},get children(){return e("users.cancel_2fa")}})]}})}})]}})})}})]}})}})]}})})}}});
