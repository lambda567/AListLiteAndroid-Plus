System.register(["./index-legacy-BnW9yB9Z.js","./useTitle-legacy-Dz_oGTmz.js","./storage-legacy-Dj_KTUH1.js","./DeletePopover-legacy-CD4d4LSF.js"],function(e,r){"use strict";var t,n,a,s,l,g,i,d,o,c,u,h,b,m,$,f,p,w,v,k,_,y,C,x,S,j,B,D,O,T,z,E,H,I,K,L,M,P,R,X,A,F,G,J,N,Q,W,q,U,V;return{setters:[e=>{t=e.D,n=e.aw,a=e.ag,s=e.cC,l=e.o,g=e.S,i=e.ab,d=e.an,o=e.aE,c=e.a2,u=e.ah,h=e.dz,b=e.dw,m=e.j,$=e.b9,f=e.br,p=e.K,w=e.bb,v=e.bu,k=e.r,_=e.cE,y=e.cF,C=e.dA,x=e.B,S=e.O,j=e.cw,B=e.bG,D=e.bI,O=e.bJ,T=e.bK,z=e.bL,E=e.bM,H=e.bN,I=e.R,K=e.bO,L=e.bP,M=e.bQ,P=e.bR,R=e.a8,X=e.a9,A=e.dn,F=e.du,G=e.dv,J=e.dx,N=e.dy},e=>{Q=e.b},e=>{W=e.t,q=e.n,U=e.u},e=>{V=e.D}],execute:function(){function r(e){const r=l(),{to:n}=m(),[a,s]=$(()=>f.post(`/admin/storage/delete?id=${e.storage.id}`)),[g,i]=$(()=>f.post(`/admin/storage/${e.storage.disabled?"enable":"disable"}?id=${e.storage.id}`));return[t(p,{onClick:()=>{n(`/@manage/storages/edit/${e.storage.id}`)},get children(){return r("global.edit")}}),t(p,{get loading(){return g()},get colorScheme(){return e.storage.disabled?"success":"warning"},onClick:async()=>{const r=await i();w(r,()=>{e.refresh()})},get children(){return r("global."+(e.storage.disabled?"enable":"disable"))}}),t(V,{get name(){return e.storage.mount_path},get loading(){return a()},onClick:async()=>{const t=await s();v(t,()=>{k.success(r("global.delete_success")),e.refresh()})}})]}function Y(e){return t(g,{get when(){return e.details},get children(){return t(_,{class:"disk-usage-percentage",trackColor:"$info3",rounded:"$full",size:"md",get value(){return U(e.details)},get children(){return[t(y,{get color(){return q(e.details)?"$danger6":"$info6"},rounded:"$md"}),t(C,{class:"disk-usage-text",get children(){return W(e.details)}})]}})}})}function Z(e){const h=l();return t(u,{w:"$full",spacing:"$2",rounded:"$lg",border:"1px solid $neutral7",get background(){return c("$neutral2","$neutral3")()},p:"$3",get _hover(){return{border:`1px solid ${o()}`}},get children(){return[t(n,{spacing:"$2",get children(){return[t(a,{fontWeight:"$medium",css:{wordBreak:"break-all"},get children(){return e.storage.mount_path}}),t(s,{colorScheme:"info",get children(){return h(`drivers.drivers.${e.storage.driver}`)}}),t(g,{get when(){return e.storage.mount_details},get children(){return t(s,{get colorScheme(){return q(e.storage.mount_details)?"danger":"success"},get children(){return W(e.storage.mount_details)}})}})]}}),t(n,{get children(){return[t(a,{get children(){return[i(()=>h("storages.common.status")),":Â "]}}),t(d,{css:{wordBreak:"break-all"},overflowX:"auto",get innerHTML(){return h(`storages.table_fields.status.${e.storage.status}`,void 0,e.storage.status)}})]}}),t(a,{css:{wordBreak:"break-all"},get children(){return e.storage.remark}}),t(n,{spacing:"$2",get children(){return t(r,e)}})]}})}function ee(e){const a=l();return t(b,{get children(){return[t(h,{get children(){return e.storage.mount_path}}),t(h,{get children(){return a(`drivers.drivers.${e.storage.driver}`)}}),t(h,{get children(){return e.storage.order}}),t(h,{get children(){return t(Y,{get details(){return e.storage.mount_details}})}}),t(h,{get children(){return a(`storages.table_fields.status.${e.storage.status}`,void 0,e.storage.status)}}),t(h,{get children(){return e.storage.remark}}),t(h,{get children(){return t(n,{spacing:"$2",get children(){return t(r,e)}})}})]}})}e("default",()=>{const e=l();Q("manage.sidemenu.storages");const{to:r}=m(),[a,s]=$(()=>f.get("/admin/storage/list")),[i,o]=x([]),c=async()=>{const e=await s();v(e,e=>o(e.content))},[h,w]=x([]),[_,y]=x([]);(async()=>{const e=await f.get("/admin/driver/names");v(e,e=>w(e))})(),c();const C=async()=>{const r=await f.post("/admin/storage/load_all");v(r,()=>{k.success(e("storages.other.start_load_success"))})},W=S(()=>i().filter(e=>0===_().length||_().includes(e.driver))),[q,U]=j("storages-layout","grid");return t(u,{spacing:"$3",alignItems:"start",w:"$full",get children(){return[t(n,{spacing:"$2",gap:"$2",w:"$full",wrap:{"@initial":"wrap","@md":"unset"},get children(){return[t(p,{colorScheme:"accent",get loading(){return a()},onClick:c,get children(){return e("global.refresh")}}),t(p,{onClick:()=>{r("/@manage/storages/add")},get children(){return e("global.add")}}),t(p,{colorScheme:"warning",get loading(){return a()},onClick:C,get children(){return e("storages.other.load_all")}}),t(g,{get when(){return h().length>0},get children(){return t(B,{multiple:!0,get value(){return _()},onChange:y,get children(){return[t(D,{get children(){return[t(O,{get children(){return e("storages.other.filter_by_driver")}}),t(T,{}),t(z,{})]}}),t(E,{get children(){return t(H,{get children(){return t(I,{get each(){return h()},children:r=>t(K,{value:r,get children(){return[t(L,{get children(){return e(`drivers.drivers.${r}`)}}),t(M,{})]}})})}})}})]}})}}),t(P,{get checked(){return"table"===q()},onChange:e=>{U(e.currentTarget.checked?"table":"grid")},get children(){return e("storages.other.table_layout")}})]}}),t(R,{get children(){return[t(X,{get when(){return"grid"===q()},get children(){return t(A,{w:"$full",gap:"$2_5",templateColumns:{"@initial":"1fr","@lg":"repeat(auto-fill, minmax(324px, 1fr))"},get children(){return t(I,{get each(){return W()},children:e=>t(Z,{storage:e,refresh:c})})}})}}),t(X,{get when(){return"table"===q()},get children(){return t(d,{w:"$full",overflowX:"auto",get children(){return t(F,{highlightOnHover:!0,dense:!0,get children(){return[t(G,{get children(){return t(b,{get children(){return[t(I,{each:["mount_path","driver","order","usage","status","remark"],children:r=>t(J,{get children(){return e(`storages.common.${r}`)}})}),t(J,{get children(){return e("global.operations")}})]}})}}),t(N,{get children(){return t(I,{get each(){return W()},children:e=>t(ee,{storage:e,refresh:c})})}})]}})}})}})]}})]}})})}}});
